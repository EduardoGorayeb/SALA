{% extends 'base.html' %}
{% load static %}
{% load socialaccount %}
{% block title %}S.A.L.A. - Login{% endblock %}
{% block head %}
<link rel="stylesheet" href="{% static 'css/auth_base.css' %}">
<link rel="stylesheet" href="{% static 'css/login.css' %}">
{% endblock %}

{% block content %}
<main class="main-content">
  <div class="recovery-container">
    <div class="form-section">
      <h2 class="form-title">Login</h2>
      <p class="form-subtitle">Entre na sua conta e continue evoluindo suas habilidades de apresentação com o S.A.L.A.</p>

      <form method="post" action="{% url 'login' %}" class="recovery-form">
        {% csrf_token %}
        <div class="form-group">
          <label class="input-label">E-mail</label>
          <div class="input-wrapper">
            <i class="fa-regular fa-envelope input-icon"></i>
            <input
              type="email"
              name="email"
              class="form-input"
              placeholder="seu@email.com"
              required
            />
          </div>
        </div>

        <div class="form-group">
          <label class="input-label">Senha</label>
          <div class="input-wrapper">
            <i class="fa-solid fa-lock input-icon"></i>
            <input
              type="password"
              id="senha-login"
              name="senha"
              class="form-input"
              placeholder="Senha"
              required
            />
            <i class="fa-regular fa-eye toggle-password" data-target="senha-login"></i>
          </div>
        </div>

        <button type="submit" class="btn-submit">Entrar</button>
        <div class="separator">ou</div>

        <div class="social-buttons">
          <a href="{% provider_login_url "google" method="oauth2" %}" class="google-btn" role="button">
            <i class="fab fa-google google-icon" aria-hidden="true"></i>
            Login com Google
          </a>
        </div>
      </form>

      <p class="login-link">
        Esqueceu a senha? <a href="{% url 'redefinir_senha' %}">Recuperar senha</a>
      </p>
      <p class="login-link">
        Ainda não tem conta? <a href="{% url 'cadastro' %}">Cadastre-se</a>
      </p>
    </div>

    <div class="info-section">
      <h2 class="info-title">Preparado para avançar ainda mais?</h2>
      <p class="info-description">Acesse sua conta e continue recebendo análises inteligentes, insights e melhorias contínuas para suas apresentações.</p>
      <ul class="info-list">
        <li class="info-list-item">
          <i class="fa-solid fa-chart-line info-list-icon"></i>
          <span>Acompanhe seu progresso detalhadamente</span>
        </li>
        <li class="info-list-item">
          <i class="fa-solid fa-star info-list-icon"></i>
          <span>Receba feedbacks personalizados da IA</span>
        </li>
        <li class="info-list-item">
          <i class="fa-solid fa-trophy info-list-icon"></i>
          <span>Compare seu desempenho ao longo do tempo</span>
        </li>
      </ul>
    </div>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

{% if messages %}
<script>
const djangoMessages = [];
{% for message in messages %}
djangoMessages.push({text: "{{ message|escapejs }}", level: "{{ message.tags }}"});
{% endfor %}
djangoMessages.forEach(m => {
  const icon = m.level.indexOf('error') !== -1 ? 'error' : (m.level.indexOf('warning') !== -1 ? 'warning' : (m.level.indexOf('success') !== -1 ? 'success' : 'info'));
  Swal.fire({icon: icon, text: m.text});
});
</script>
{% endif %}

<script src="{% static 'js/auth_password.js' %}"></script>
{% endblock %}